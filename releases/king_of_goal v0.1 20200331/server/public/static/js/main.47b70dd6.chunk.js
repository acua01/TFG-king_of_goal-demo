(this["webpackJsonpking-of-goal"]=this["webpackJsonpking-of-goal"]||[]).push([[0],{139:function(e,t){},150:function(e,t,a){e.exports=a(289)},289:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),l=(a(155),a(33)),s=a(295),c=a(294),u=a(48),m=(a(156),a(31)),p={"@font-face":[{fontFamily:"Bebas",src:'url("/fonts/BebasNeueRegular.otf")'},{fontFamily:"Anelize",src:'url("/fonts/Aneliza.otf")'}],"@global":{body:{margin:0},main:{width:"100%"},footer:{textAlign:"center",backgroundColor:"#262626",color:"white",padding:"50px 0",display:"flex",justifyContent:"center",alignItems:"center","& > img":{margin:"10px 0",backgroundColor:"white",padding:"10px",borderRadius:"5px",width:"55px"},"& > p":{margin:"10px 10px",fontFamily:"Anelize"}},"@media screen and (max-width:552px)":{footer:{flexDirection:"column"}}}},d=a(27),g=a(296),f=a(297),h={login:{display:"flex"},leftSide:{backgroundColor:"#333333",display:"flex",justifyContent:"center",alignItems:"center",width:"50%","& img":{width:"60%",margin:"250px 0"}},rightSide:{backgroundColor:"#ff6600",width:"50%",display:"flex",flexDirection:"column",alignItems:"center","& form":{width:"80%",minWidth:"400px",display:"flex",flexDirection:"column",alignItems:"center"},"& form h1":{color:"white",marginTop:"20%",marginBottom:"15%",fontFamily:"Bebas",letterSpacing:"2px",fontSize:"40px"},'& form input[type="submit"]':{backgroundColor:"#333333",color:"white",padding:"8px 20px",width:"auto",marginTop:"30px",fontSize:"17px",cursor:"pointer",border:"none",fontFamily:"Anelize"},'& form input[type="submit"]:hover':{backgroundColor:"white",color:"#333333"},"& form > p":{fontFamily:"Anelize",color:"white",marginTop:"50px",fontSize:"16px"},"& form > p > a":{textDecoration:"underline",cursor:"pointer",color:"white"}},field:{width:"100%",display:"flex",justifyContent:"center",margin:"10px 0","& > label":{backgroundColor:"#333333",color:"white",padding:"10px"},"& > input":{width:"40%",border:"none",paddingLeft:"5px",fontFamily:"Anelize"}},icon:{color:"white",margin:0,padding:0},smallerScreen:{width:"100%",backgroundColor:"#ff6600",display:"flex",flexDirection:"column",alignItems:"center","& form":{width:"60%",minWidth:"400px",marginBottom:"20%",display:"flex",flexDirection:"column",alignItems:"center"},"& form h1":{color:"white",marginTop:"10%",marginBottom:"10%",fontFamily:"Bebas",letterSpacing:"2px",fontSize:"40px"},'& form input[type="submit"]':{backgroundColor:"#333333",color:"white",padding:"8px 20px",width:"auto",marginTop:"30px",fontSize:"17px",cursor:"pointer",border:"none"},'& form input[type="submit"]:hover':{backgroundColor:"white",color:"#333333"},"& form > p":{fontFamily:"Anelize",color:"white",marginTop:"50px",fontSize:"16px"},"& form > p > a":{textDecoration:"underline",cursor:"pointer",color:"white"}}},b=a(40),E=function(e,t){switch(e){case"error":u.b.error(t,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});break;default:u.b.success(t,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}},x=function(e,t){if("error"===e)if(t.response&&422!==t.response.status)404===t.response.status?E("error",t.response.statusText):E("error",t.response.data.message);else if(t.response&&422===t.response.status)for(var a in t.response.data)t.response.data[a].forEach((function(t){E(e,t)}));else E("error","Hubo un error interno");else E(e,t)},v=Object(m.a)(h)((function(e){var t=e.classes,a=(e.state,e.actions),o=e.history,i=Object(n.useState)(""),l=Object(d.a)(i,2),s=l[0],c=l[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],h=m[1],b=function(e){e.preventDefault();var t=[];""==s&&t.push("Introduce un email."),/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(s)||t.push("Introduce un email v\xe1lido."),""==p&&t.push("Introduce una contrase\xf1a."),0===t.length?a.sendRequestToLoginUser(o,{email:s,password:p}):t.map((function(e){E("error",e)}))};return r.a.createElement("div",{className:t.login},r.a.createElement(g.a,{minWidth:644,as:n.Fragment},r.a.createElement("div",{className:t.leftSide},r.a.createElement("img",{src:"/storage/logo/logo_light.png",alt:"logo-king-of-goal",title:"King of Goal"})),r.a.createElement("div",{className:t.rightSide},r.a.createElement("form",{onSubmit:b},r.a.createElement("h1",null,"Iniciar sesi\xf3n"),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"email"},r.a.createElement(f.a,{name:"at",className:t.icon,size:"large"})),r.a.createElement("input",{type:"text",name:"email",id:"email",placeholder:"Email",value:s,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"password"},r.a.createElement(f.a,{name:"lock",className:t.icon,size:"large"})),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Contrase\xf1a",value:p,onChange:function(e){return h(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Entrar"}),r.a.createElement("p",null,"\xbfNo tienes cuenta a\xfan? ",r.a.createElement("a",{onClick:function(){return e.history.push("/registro")}},"Reg\xedstrate"))))),r.a.createElement(g.a,{minWidth:0,maxWidth:643,as:n.Fragment},r.a.createElement("div",{className:t.smallerScreen},r.a.createElement("form",{onSubmit:b},r.a.createElement("h1",null,"Iniciar sesi\xf3n"),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"email"},r.a.createElement(f.a,{name:"at",className:t.icon,size:"large"})),r.a.createElement("input",{type:"text",name:"email",id:"email",placeholder:"Email",value:s,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"password"},r.a.createElement(f.a,{name:"lock",className:t.icon,size:"large"})),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Contrase\xf1a",value:p,onChange:function(e){return h(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Entrar"}),r.a.createElement("p",null,"\xbfNo tienes cuenta a\xfan? ",r.a.createElement("a",{onClick:function(){return o.push("/registro")}},"Reg\xedstrate"))))))})),y={register:{width:"100%",backgroundColor:"#ff6600",display:"flex",flexDirection:"column",alignItems:"center","& form":{width:"60%",minWidth:"600px",marginBottom:"120px",display:"flex",flexDirection:"column",alignItems:"center"},"& form h1":{color:"white",marginTop:"120px",marginBottom:"60px",fontFamily:"Bebas",letterSpacing:"2px",fontSize:"40px"},'& form input[type="submit"]':{backgroundColor:"#333333",color:"white",padding:"8px 20px",width:"auto",marginTop:"30px",fontSize:"17px",cursor:"pointer",border:"none",fontFamily:"Anelize"},'& form input[type="submit"]:hover':{backgroundColor:"white",color:"#333333"}},field:{width:"100%",display:"flex",justifyContent:"center",margin:"10px 0","& > label":{backgroundColor:"#333333",color:"white",padding:"10px"},"& > input":{width:"40%",border:"none",paddingLeft:"5px",fontFamily:"Anelize"}},icon:{color:"white",margin:0,padding:0}},w=Object(m.a)(y)((function(e){var t=e.classes,a=(e.state,e.actions),o=e.history,i=Object(n.useState)(""),l=Object(d.a)(i,2),s=l[0],c=l[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],g=m[1],h=Object(n.useState)(""),b=Object(d.a)(h,2),x=b[0],v=b[1],y=Object(n.useState)(""),w=Object(d.a)(y,2),k=w[0],C=w[1];return r.a.createElement("div",{className:t.register},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=[];""==s&&t.push("Introduce un nick."),(s.length<3||s.length>20)&&t.push("Introduce un nick de m\xednimo 3 caracteres y m\xe1ximo de 20."),/^[a-zA-Z0-9]+$/i.test(s)||t.push("Introduce un nick con caracteres alfanum\xe9ricos."),""==p&&t.push("Introduce un email."),/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(p)||t.push("Introduce un email v\xe1lido."),""==x&&t.push("Introduce una contrase\xf1a."),(x.length<5||x.length>20)&&t.push("Introduce un contrase\xf1a de m\xednimo 3 caracteres y m\xe1ximo de 20."),x!=k&&t.push("Las contrase\xf1as no coinciden."),0===t.length?a.sendRequestToRegisterUser(o,{username:s,email:p,password:x,password2:k}):t.map((function(e){E("error",e)}))}},r.a.createElement("h1",null,"Registro"),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"username"},r.a.createElement(f.a,{name:"user",className:t.icon,size:"large"})),r.a.createElement("input",{type:"text",id:"username",placeholder:"Nick (3-20 caracteres alfanum\xe9ricos)",minLength:"3",maxLength:"20",value:s,onChange:function(e){return c(e.target.value)},required:!0})),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"email"},r.a.createElement(f.a,{name:"at",className:t.icon,size:"large"})),r.a.createElement("input",{type:"text",id:"email",placeholder:"Email",value:p,onChange:function(e){return g(e.target.value)},required:!0})),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"password"},r.a.createElement(f.a,{name:"lock",className:t.icon,size:"large"})),r.a.createElement("input",{type:"password",id:"password",placeholder:"Contrase\xf1a (5-20 caracteres)",minLength:"5",maxLength:"20",value:x,onChange:function(e){return v(e.target.value)},required:!0})),r.a.createElement("div",{className:t.field},r.a.createElement("label",{for:"password2"},r.a.createElement(f.a,{name:"lock",className:t.icon,size:"large"})),r.a.createElement("input",{type:"password",id:"password2",placeholder:"Repetir contrase\xf1a",minLength:"5",maxLength:"20",value:k,onChange:function(e){return C(e.target.value)},required:!0})),r.a.createElement("input",{type:"submit",value:"Registrar"})))})),k=a(139),C=a.n(k),O=[{path:"/login",component:v},{path:"/registro",component:w},{path:"/",component:Object(m.a)(C.a)((function(e){var t=e.classes,a=e.history,n=e.actions;e.state;return r.a.createElement("div",{className:t.mainMenu},r.a.createElement("h1",null,"Est\xe1s logueado"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),n.logout(a)}},"Cerrar sesi\xf3n"))}))}],j=function(e){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=Object.keys(e),r={},o=0;o<n.length;o++){var i=e[n[o]](t[n[o]],a);r[n[o]]=i}return r}},S=a(62),N="START_LOADING",z="END_LOADING",L="SET_AUTH",I="REMOVE_AUTH",A=function(e,t,a){return delete t.type,n=e,r=Object(S.a)({},a,Object(b.a)({},t)),Object(b.a)({},n,{},r);var n,r},T={app:{authentication:{auth:!1},loader:{isLoading:!1,message:""}}},R=j({app:function(e,t){var a=e;switch(t.type){case N:case z:a=A(e,t,"loader");break;case L:case I:a=A(e,t,"authentication")}return a}}),D=a(49),B=a.n(D),F=a(84),q=a(42),W=a.n(q),H=function(e,t){return Object(b.a)({},function(e,t){return{sendRequestToRegisterUser:function(){var e=Object(F.a)(B.a.mark((function e(a,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:N,isLoading:!0,message:"Cargando..."}),e.next=4,W.a.post("/register",n);case 4:e.sent,a.push("/login"),E("success","Te has registrado correctamente."),t({type:z,isLoading:!1,message:""}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:z,isLoading:!1,message:""}),x("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),sendRequestToLoginUser:function(){var e=Object(F.a)(B.a.mark((function e(a,n){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:N,isLoading:!0,message:"Cargando..."}),e.next=4,W.a.post("/login",n);case 4:r=e.sent,W.a.defaults.headers.common.api_token=r.data.token,sessionStorage.setItem("token",r.data.token),t({type:L,auth:!0}),a.push("/"),E("success","Has iniciado sesi\xf3n correctamente."),t({type:z,isLoading:!1,message:""}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:z,isLoading:!1,message:""}),x("error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}()}}(0,t),{},function(e,t){return{startLoading:function(e){t({type:N,isLoading:!0,message:e})},endLoading:function(){t({type:z,isLoading:!1,message:""})},checkAuth:function(){sessionStorage.getItem("token")&&t({type:L,auth:!0})},logout:function(e){t({type:I,auth:!1}),sessionStorage.setItem("token",""),e.push("/login")}}}(0,t))},U=Object(n.createContext)(),_=Object(m.a)(p)(Object(l.g)((function(e){var t=e.classes,a=e.history,o=Object(n.useContext)(U),i=o.state,m=o.actions;Object(n.useEffect)((function(){m.checkAuth()}),[]),Object(n.useEffect)((function(){i.app.authentication.auth?a.push("/"):a.push("/login")}),[i.app.authentication.auth]);var p=O.map((function(e,t){return r.a.createElement(l.b,{key:t,path:e.path,render:function(){return r.a.createElement(e.component,{state:i,actions:m,history:a})}})}));return r.a.createElement("div",{className:t.mainLayout},r.a.createElement(s.a,{active:i.app.loader.isLoading},r.a.createElement(c.a,null,i.app.loader.message)),r.a.createElement(u.a,{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement("main",null,r.a.createElement(l.d,null,p,r.a.createElement(l.a,{to:"/login"}))),r.a.createElement("footer",null,r.a.createElement("img",{src:"/storage/acua.png",alt:"logo-acua",title:"Acua"}),r.a.createElement("p",null,"Developed by Alejandro Acuaviva Plazuelo")))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(37);W.a.defaults.baseURL="http://localhost:8000",i.a.render(r.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(R,T),o=Object(d.a)(a,2),i=o[0],l=o[1],s=H(0,l);return Object(n.useEffect)((function(){console.log({newState:i})}),[i]),r.a.createElement(U.Provider,{value:{state:i,dispatch:l,actions:s}},t)}),null,r.a.createElement(P.a,null,r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[150,1,2]]]);